<!DOCTYPE html>
<html>
<head>
<title>Stormworks Addon Lua Documentation</title>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-dark.min.css'>
<script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js'></script>
<script>hljs.configure({ languages: [] }); hljs.highlightAll();</script>
<script>hljs.registerLanguage('lua', function(hljs) { return { keywords: { keyword: 'function', }, contains: [hljs.COMMENT('--', '$', { relevance: 0 })] }; });</script>
<style>
body { font-family: Arial, sans-serif; margin: 0; background-color: #282c34; color: #abb2bf; }
#nav { position: fixed; top: 0; bottom: 0; left: 0; width: 200px; background-color: #2c313a; padding: 20px; overflow-y: auto; }
#content { margin-left: 240px; padding: 20px; }
#about { position: absolute; bottom: 10px; left: 10px; color: #abb2bf; }
a { display: block; margin-bottom: 10px; text-decoration: none; color: #abb2bf; }
a:hover { color: #fff; }
h2 { font-size: 24px; margin-bottom: 5px; }
code { white-space: pre-wrap; }
</style>
</head>
<body>
<div id='nav'>
<h2 style='color: #abb2bf; margin-bottom: 20px;'>Navigation</h2>
<ul>
<li><a href='#addon.txt'>Addon</a></li>
<li><a href='#ai.txt'>Ai</a></li>
<li><a href='#callback.txt'>Callback</a></li>
<li><a href='#chat.txt'>Chat</a></li>
<li><a href='#examples.txt'>Examples</a></li>
<li><a href='#game.txt'>Game</a></li>
<li><a href='#general.txt'>General</a></li>
<li><a href='#matrix.txt'>Matrix</a></li>
<li><a href='#misc.txt'>Misc</a></li>
<li><a href='#objects.txt'>Objects</a></li>
<li><a href='#vehicles.txt'>Vehicles</a></li>
</ul>
<div id='about'>
<h2 style='color: #abb2bf; margin-bottom: 10px;'>About</h2>
<p style='font-size: 14px;'>Stormworks Addon Lua Documentation. Created by angezockt9980 with the help of fabi123. Support: <a href='https://discord.gg/s4YSHf5qGt' style='color: #abb2bf; text-decoration: underline;'>https://discord.gg/s4YSHf5qGt</a></p>
</div>
</div>
<div id='content'>
<h2 id='addon.txt' style='color: #abb2bf; margin-bottom: 5px;'>Addon</h2>
<pre><code class='lua'>Get the internal index of this addon

addon_index, is_success = server.getAddonIndex()

Get the internal index of an active addon by its name (useful if you want to spawn components from another active addon)

addon_index, is_success = server.getAddonIndex(name)

Get the internal index of a location in the specified addon by its name (this index is local to the addon)

location_index, is_success = server.getLocationIndex(addon_index, name)

Directly spawn a location by name from the current addon, optional world transform parameter - otherwise spawns at first tile of the location type.

is_success = server.spawnNamedAddonLocation(name, (transform_matrix))

Spawn the specified mission location from the specified mission addon at  the specified world coordinates. A transform_matrix with x,y,z = 0,0,0 will spawn the location at a random location of the tile's type (useful for spawning missions on specific tiles)

out_transform_matrix, is_success = server.spawnAddonLocation(transform_matrix, addon_index, location_index)

Get the filepath of an addon, is_rom will only be true for DEV addons stored in the rom folder

path, is_success = server.getAddonPath(addon_name, is_rom)

Get a table of all active ENV MOD zones.

ZONE_LIST = server.getZones()

ZONE_LIST = { 
		[zone_index] = { 
			["tags_full"] = tags, 
			["tags"] = { [i] = tag },
			["name"] = name, 
			["transform"] = transform_matrix, 
			["size"] = {x, y, z}, 
			["radius"] = radius, 
			["type"] = ZONE_TYPE,
			["parent_vehicle_id"] = parent_vehicle_id,
			["parent_relative_transform"] = relative_matrix
		}
	}

	ZONE_TYPE |
	0 = box,
	1 = sphere,
	2 = radius,

Get a table of all active ENV MOD zones that match the specified tag(s)

ZONE_LIST = server.getZones(tag(s))

Returns whether the specified world transform is within any ENV MOD zone that matches the display name. For specific zones, using isInTransformArea may be preferred.

is_in_zone, is_success = server.isInZone(transform_matrix, zone_display_name)

Get number of active addons.

count = server.getAddonCount()

Get table of addon data for the specified addon_index. Returns nil if the addon cannot be found.

ADDON_DATA = server.getAddonData(addon_index)

ADDON_DATA = {
		["name"] = name, 
		["path_id"] = folder_path, 
		["file_store"] = is_app_data, 
		["location_count"] = location_count 
	}

Get table of location data for the specified location at the specified addon_index. Returns nil if the location cannot be found.

LOCATION_DATA, is_success = server.getLocationData(addon_index, location_index)

LOCATION_DATA = {
		["name"] = name,
		["tile"] = tile_filename, 
		["env_spawn_count"] = spawn_count, 
		["env_mod"] = is_env_mod, 
		["component_count"] = component_count 
	}

Get table of component(object/vehicle) data for the specified component at the specified location at the specified addon_index. Returns nil if the component cannot be found.

COMPONENT_DATA, is_success = server.getLocationComponentData(addon_index, location_index, component_index)

COMPONENT_DATA = {
		["tags_full"] = tags,
		["tags"] = { [i] = tag },
		["display_name"] = display_name, 
		["type"] = TYPE_STRING,
		["id"] = component_id,
		["dynamic_object_type"] = OBJECT_TYPE,
		["transform"] = transform_matrix, 
		["vehicle_parent_component_id"] = vehicle parent component id ,
		["character_outfit_type"] = OUTFIT_TYPE 
	}

Spawn the component(object/vehicle) at the specified component index at the specified location at the specified addon_index. Optional parent_vehicle_id param for fire and zone components.

COMPONENT, is_success = server.spawnAddonComponent(transform_matrix, addon_index, location_index, component_index, [parent_vehicle_id])

COMPONENT = {
		["tags_full"] = tags, 
		["tags"] = { [i] = tag }, 
		["display_name"] = display_name, 
		["type"] = TYPE_STRING, 
		["transform"] = transform_matrix, 
		["id"] = object_id/main_vehicle_id 
		["object_id"] = object_id/main_vehicle_id 
        ["group_id"] = object_id/vehicle_id 
        ["vehicle_ids"] = { [i] = vehicle_id }
	}


</code></pre>
<hr>
<h2 id='ai.txt' style='color: #abb2bf; margin-bottom: 5px;'>Ai</h2>
<pre><code class='lua'>Lua AI can be run on any character, and their resulting actions are dictated by their state and the AI Type of the seat they are attached to.

Gun components and Camera components can be linked to a seat by naming them identically.

Sets the AI state for a character object.

server.setAIState(object_id, AI_STATE)

	SEAT TYPE = Ship Pilot
		AI_STATE |
		0 = none,
		1 = path to destination,

	SEAT TYPE = Helicopter Pilot
		AI_STATE |
		0 = none,
		1 = path to destination,
		2 = path to destination accurate (smaller increments for landing/takeoff),
		3 = gun run (Fly at target and press the trigger hotkey when locked on),

	SEAT TYPE = Plane Pilot
		AI_STATE |
		0 = none,
		1 = path to destination,
		2 = gun run (Fly at target and press the trigger hotkey when locked on),

	SEAT TYPE = Gunner
		AI_STATE |
		0 = none,
		1 = fire at target (Accounts for bullet drop / effective range when pulling the trigger),

	SEAT TYPE = Designator
		AI_STATE |
		0 = none,
		1 = aim at target (Pulls the trigger when looking directly at target),

Seat Outputs:

SEAT TYPE = Ship Pilot
		Hotkey 1 = Engine On
		Hotkey 2 = Engine Off
		Axis W = Throttle
		Axis D = Steering

	SEAT TYPE = Helicopter Pilot
		Hotkey 1 = Engine On 
		Hotkey 2 = Engine Off
		Axis W = Pitch
		Axis D = Roll
		Axis Up = Collective
		Axis Right = Yaw
		Trigger = Shoot

	SEAT TYPE = Plane Pilot
		Hotkey 1 = Engine On 
		Hotkey 2 = Engine Off
		Axis W = Pitch
		Axis D = Roll
		Axis Up = Throttle
		Axis Right = Yaw
		Trigger = Shoot

	SEAT TYPE = Gunner
		Axis W = Pitch
		Axis D = Yaw
		Trigger = Shoot

	SEAT TYPE = Designator
		Axis W = Pitch
		Axis D = Yaw
		Trigger = Designate

Sets the target destination for an AI.

server.setAITarget(object_id, matrix_destination)

Gets the target destination for an AI. Returns nil on failure.

TARGET_DATA = server.getAITarget(object_id)

TARGET_DATA = {
		["character"] = target character object id,
		["vehicle"] = target vehicle id,
		["x"] = target_x,
		["y"] = target_y,
		["z"] = target_z,
	}

Sets the target character for an AI. Different AIs use this data for their unique tasks.

server.setAITargetCharacter(object_id, target_object_id)

Sets the target vehicle for an AI. Different AIs use this data for their unique tasks.

server.setAITargetVehicle(object_id, target_vehicle_id)


</code></pre>
<hr>
<h2 id='callback.txt' style='color: #abb2bf; margin-bottom: 5px;'>Callback</h2>
<pre><code class='lua'>Listed below are callback functions that can be added to a script and are automatically called when their specific conditions are met, the simplest callback function is onTick which is automatically called every game tick.

Called every game tick. game_ticks refers to the number of ticks that have passed this frame (normally 1, while sleeping 400).

function onTick(game_ticks)

onCreate is called when the script is initialized (whenever creating or loading a world. is_world_create is true only on world generate (first load).

function onCreate(is_world_create)

onDestroy is called whenever the world is exited.

function onDestroy()

onCustomCommand is called when a command is typed into chat. full_message contains the entire message including spaces, command contains the first parameter including the ? e.g. ?teleport, args ... represents the variadic arguments of the command (can also be explicitly declared, see example below)

function onCustomCommand(full_message, user_peer_id, is_admin, is_auth, command, args ...)

onChatMessage is called when a chat message is posted.

function onChatMessage(peer_id, sender_name, message)

onPlayerJoin is called when a player joins the game.

function onPlayerJoin(steam_id, name, peer_id, is_admin, is_auth)

onPlayerSit is called when a player sits in a seat.

function onPlayerSit(peer_id, vehicle_id, seat_name)

onPlayerUnsit is called when a player gets out of a seat.

function onPlayerUnsit(peer_id, vehicle_id, seat_name)

onCharacterSit is called when any character (including players) sits in a seat.

function onCharacterSit(object_id, vehicle_id, seat_name)

onCharacterUnsit is called when a any character (including players)gets out of a seat.

function onCharacterUnsit(object_id, vehicle_id, seat_name)

onCharacterPickup is called when a character object picks up a character.

function onCharacterPickup(object_id_actor, object_id_target)

onCreatureSit is called when any creature sits in a seat.

function onCreatureSit(object_id, vehicle_id, seat_name)

onCreatureUnsit is called when a any creature gets out of a seat.

function onCreatureUnsit(object_id, vehicle_id, seat_name)

onCreaturePickup is called when a character object picks up a creature.

function onCreaturePickup(object_id_actor, object_id_target, CREATURE_TYPE)

onEquipmentPickup is called when a character object picks up an equipment Item.

function onEquipmentPickup(object_id_actor, object_id_target, EQUIPMENT_ID)

onEquipmentDrop is called when a character object drops an equipment Item.

function onEquipmentDrop(object_id_actor, object_id_target, EQUIPMENT_ID)

onPlayerRespawn is called when a player respawns.

function onPlayerRespawn(peer_id)

onPlayerLeave is called when a player leaves the game.

function onPlayerLeave(steam_id, name, peer_id, is_admin, is_auth)

onToggleMap is called when a player opens/closes the map. is_open represents whether their map is open.

function onToggleMap(peer_id, is_open)

onPlayerDie is called when a player dies.

function onPlayerDie(steam_id, name, peer_id, is_admin, is_auth)

onGroupSpawn is called when a vehicle group is spawned. If group is spawned by a script peer_id will be -1. All vehicles in a group must still load locally so they can begin simulating for players. x, y, z are the spawn coordinates in world space. Cost is currently only calculated for player spawned vehicle groups.

function onGroupSpawn(group_id, peer_id, x, y, z, group cost)

onVehicleSpawn is called when a vehicle is spawned. If vehicle is spawned by a script peer_id will be -1. Spawned vehicles must still load locally so they can begin simulating for players. x, y, z are the spawn coordinates in world space. Cost is currently only calculated for player spawned vehicle groups.

function onVehicleSpawn(vehicle_id, peer_id, x, y, z, group cost, group_id)

onVehicleDespawn is called when a vehicle is despawned. If vehicle is despawned by a script peer_id will be -1.

function onVehicleDespawn(vehicle_id, peer_id)

onVehicleLoad is called when a vehicle has loaded and is ready to simulate.

function onVehicleLoad(vehicle_id)

onVehicleUnload is called when a vehicle has unloaded and is no longer simulating.

function onVehicleUnload(vehicle_id)

onVehicleTeleport is called when a vehicle is teleported or returned to workbench. If vehicle is teleported by a script peer_id will be -1. x,y,z are the destination coordinates in world space.

function onVehicleTeleport(vehicle_id, peer_id, x, y, z)

onObjectLoad is called when an object (character/prop/animal) has loaded and is ready to simulate.

function onObjectLoad(object_id)

onObjectUnload is called when an object (character/prop/animal) has unloaded and is no longer simulating.

function onObjectUnload(object_id)

onButtonPress is called when a button is interacted with (still triggers on locked buttons). To get a button's current state please use getVehicleButton()

function onButtonPress(vehicle_id, peer_id, button_name, is_pressed)

onSpawnAddonComponent is called when a vehicle or object is spawned by a script. addon_index is the internal index of the addon the object was spawned from (see mission functions below)

function onSpawnAddonComponent(object_id/vehicle_id, component_name, TYPE_STRING, addon_index)

TYPE_STRING |
	"zone",
	"object",
	"character",
	"vehicle",
	"flare",
	"fire",
	"loot",
	"button",
	"animal"
	"ice"

onVehicleDamaged is called when a vehicle is damaged or repaired. Damage amount will be negative if the component is repaired. The voxel parameters refer to the voxel position on the vehicle that sustained the damage relative to the origin of the vehicle. body_index is 0 for the main vehicle body, checking this parameter may be helpful for vehicles with sub bodies such as missiles that should be ignored.

function onVehicleDamaged(vehicle_id, damage_amount, voxel_x, voxel_y, voxel_z, body_index)

httpReply is called when a HTTP request has returned. The callback details the request and the received reply.

function httpReply(port, request, reply)

onFireExtinguished is called when a fire is extinguished. The returned coordinates represent the fire's world coordinates.

function onFireExtinguished(fire_x, fire_y, fire_z)

onForestFireSpawned is called when 5 or more trees are detected to be on fire within a small radius. The returned coordinates represent the fire's world coordinates. The objective ID is used to track separate forest fire events.

function onForestFireSpawned(fire_objective_id, fire_x, fire_y, fire_z)

onForestFireExtinguished is called when all trees within a forest fire objective have been extinguished. The returned coordinates represent the fire's world coordinates. The objective ID is used to track separate forest fire events.

function onForestFireExtinguished(fire_objective_id, fire_x, fire_y, fire_z)

Called when a tornado is spawned.

function onTornado(transform)

Called when a meteor is spawned.

function onMeteor(transform, magnitude)

Called when a tsunami is spawned.

function onTsunami(transform, magnitude)

Called when a whirlpool is spawned.

function onWhirlpool(transform, magnitude)

Called when a volcano is triggered.

function onVolcano(transform)

Called when an oil spill is updated, with the change (positive or negative) and the resulting total oil amount. Vehicle id is -1 for script command or oil tick updates.

function onOilSpill(tile_x, tile_y, delta, total, vehicle_id)


</code></pre>
<hr>
<h2 id='chat.txt' style='color: #abb2bf; margin-bottom: 5px;'>Chat</h2>
<pre><code class='lua'>Sends a chat message. peer_id is optional and defaults to -1 for all peers. Announce mssages are not handled as commands.

server.announce(name, message, (peer_id))

Sends a command message directly to all other scripts. Uses peer id -1 when arriving in the onCustomCommand callback.

server.command(message)

Sends a pop up notification to the specified peer(s)

server.notify(peer_id, title, message, NOTIFICATION_TYPE)

NOTIFICATION_TYPE |
	0 = new_mission,
	1 = new_mission_critical,
	2 = failed_mission,
	3 = failed_mission_critical,
	4 = complete_mission,
	5 = network_connect,
	6 = network_disconnect,
	7 = network_info,
	8 = chat_message,
	9 = network_info_critical

Map & World

Returns a unique UI id number for use with all other UI functions, The UI ID can be used to track, edit and clean UI elements up.

ui_id = server.getMapID()

Removes all UI with the specified UI ID for the specified peer(s)

server.removeMapID(peer_id, ui_id)

Add a map marker for the specified peer(s). x, z represent the worldspace location of the marker, since the map is 2D a y coordinate is not required. If POSITION_TYPE is set to 1 or 2 (vehicle or object) then the marker will track the object/vehicle of object_id/vehicle_id and offset the position by parent_local_x, parent_local_z. Custom color defaults to red (0-255).

server.addMapObject(peer_id, ui_id, POSITION_TYPE, MARKER_TYPE, x, z, parent_local_x, parent_local_z, vehicle_id, object_id, label, radius, hover_label)

server.addMapObject(peer_id, ui_id, POSITION_TYPE, MARKER_TYPE, x, z, parent_local_x, parent_local_z, vehicle_id, object_id, label, radius, hover_label, r, g, b, a)

POSITION_TYPE |
	0 = fixed,
	1 = vehicle,
	2 = object

	MARKER_TYPE |
	0 = delivery_target,
	1 = survivor,
	2 = object,
	3 = waypoint,
	4 = tutorial,
	5 = fire,
	6 = shark,
	7 = ice,
	8 = search_radius
	9 = flag_1
	10 = flag_2
	11 = house
	12 = car
	13 = plane
	14 = tank
	15 = heli
	16 = ship
	17 = boat
	18 = attack
	19 = defend

Removes a map object with the specified UI ID for the specified peer(s)

server.removeMapObject(peer_id, ui_id)

Add a map label for the specified peer(s). x, z represent the worldspace location of the marker. Map labels appear under fog of war. Custom color defaults to black (0-255).

server.addMapLabel(peer_id, ui_id, LABEL_TYPE, name, x, z)

server.addMapLabel(peer_id, ui_id, LABEL_TYPE, name, x, z, r, g, b, a)

LABEL_TYPE |
	0 = none,
	1 = cross,
	2 = wreckage,
	3 = terminal,
	4 = military,
	5 = heritage,
	6 = rig,
	7 = industrial,
	8 = hospital,
	9 = science,
	10 = airport,
	11 = coastguard,
	12 = lighthouse,
	13 = fuel,
	14 = fuel_sell,
	15 = hospital_ship,
	16 = refuel_plane,
	17 = ore,
	18 = ingot,
	19 = fish,
	20 = dollar,

Removes a map label with the specified UI ID for the specified peer(s)

server.removeMapLabel(peer_id, ui_id)

Adds a map line between two world space matrices with the specified UI ID for the specified peer(s). Custom color defaults to red.

server.addMapLine(peer_id, ui_id, start_matrix, end_matrix, width)

server.addMapLine(peer_id, ui_id, start_matrix, end_matrix, width, r, g, b, a)

Removes a map line with the specified UI ID for the specified peer(s)

server.removeMapLine(peer_id, ui_id)

Creates a popup to the world/screen with the specified UI ID for the specified peer(s). If render distance is set to 0 then the popup will always render. Optionally Parent to a vehicle or Object, with x,y,z acting as a relative position.

server.setPopup(peer_id, ui_id, name, is_show, text, x, y, z, render_distance, [vehicle_parent_id], [object_parent_id])

Creates a popup to the screen with the specified UI ID for the specified peer(s). Screen space offset ranges from -1,-1 (Bot Left) to 1,1 (Top Right).

server.setPopupScreen(peer_id, ui_id, name, is_show, text, horizontal_offset, vertical_offset)

Removes a popup with the specified UI ID for the specified peer(s)

server.removePopup(peer_id, ui_id)


</code></pre>
<hr>
<h2 id='examples.txt' style='color: #abb2bf; margin-bottom: 5px;'>Examples</h2>
<pre><code class='lua'>The following examples show ways to use the API to accomplish simple tasks. For more advanced examples; the default addon scripts showcase a wide array of lua techniques. Additional help is available in the official discord.

onCustomCommand is a flexible function that detects any chat messages starting with the command prefix ?, and breaks them up for processing. The example below shows how you can use it to set up your own commands with explicitly declared arguments.

function onCustomCommand(full_message, user_peer_id, is_admin, is_auth, command, arg1, arg2, arg3, arg4)
	
	--Only an admin can use this command
	--Example use: ?tp 2000 80 2500
	if command == "?tp" and is_admin == true then
		server.setPlayerPos(user_peer_id, matrix.translation(arg1,arg2,arg3))
	end

	if command == "?hello" then
		name, is_success = server.getPlayerName(user_peer_id)
		server.announce("[Server]", "Hello " .. name)
	end
end

The script below shows how to detect when a specific player has finished loading, by detecting when their object has loaded.

function onObjectLoad(object_id)
	if object_id == server.getPlayerCharacterID(0) then
		server.announce("Player Loaded: ", object_id)
	end
end

The script below shows one example of how you can spawn mission locations from the addon, track and despawn them.

spawned_mission_objects = {}

function onCustomCommand(full_message, user_peer_id, is_admin, is_auth, command, arg1, arg2, arg3, arg4)

	--Example use: ?spawnLocation my_boat 50 15 1000
	--Example use: ?spawnLocation my_mission 0 0 0
	if command == "?spawnLocation" and is_admin == true then
		local addon_index = server.getAddonIndex()
		server.spawnAddonLocation(matrix.translation(arg2,arg3,arg4), addon_index, (server.getLocationIndex(addon_index, arg1)))	
	end

	if command == "?despawn" and is_admin == true then
		for id, object in pairs(spawned_mission_objects) do	
			if(object["type"] == "vehicle")
			then
				server.despawnVehicle(id, true)
			else
				server.despawnObject(id, true)
			end
		end
	end

end

function onSpawnAddonComponent(id, name, type, addon_index)		 	
	if (addon_index == server.getAddonIndex())
	then
		spawned_mission_objects[id] = {["name"] = name, ["type"] = type}
	end
end

The following function shows the easiest way to spawn a mission location from the script's parent addon.

function onCustomCommand(full_message, user_peer_id, is_admin, is_auth, command, arg1, arg2, arg3, arg4)

	if command == "?spawn_deltars_boat" then
		server.announce("[My_Addon]", "Spawning location named DELTARS_BOAT_SPAWNER")
		server.spawnNamedAddonLocation("DELTARS_BOAT_SPAWNER")
	end
end

The following function shows one way of testing if any player is at a location. Please note the extra set of brackets around server.getPlayerPos to capture only the first return variable and ignore the is_success variable that server.getPlayerPos also returns.

function anyPlayerAtPos(posX, posY, posZ)

	local players = server.getPlayers()
	for player_index, player_object in pairs(players) do
		local x, y, z = matrix.position((server.getPlayerPos(player_object.id)))

		local distSQ = ((posX - x) ^ 2) + ((posY - y) ^ 2) + ((posZ - z) ^ 2)
		if(distSQ < 25)
		then
			return true
		end
	end

	return false
end


</code></pre>
<hr>
<h2 id='game.txt' style='color: #abb2bf; margin-bottom: 5px;'>Game</h2>
<pre><code class='lua'>Attempts to spawn a tsunami epicentered at the target transform, only one tsunami/whirlpool can be active at a time; stronger events will override weaker ones. Magnitude ranges from 0-1.

is_success = server.spawnTsunami(transform_matrix, magnitude)

Attempts to spawn a whirlpool near to the target transform, can fail based on ocean depth, only one tsunami/whirlpool can be active at a time; stronger events will override weaker ones. Magnitude ranges from 0-1.

is_success = server.spawnWhirlpool(transform_matrix, magnitude)

Cancels the active ocean gerstner wave event (tsunami or whirlpool).

server.cancelGerstner()

Spawns a tornado at the target transform.

is_success = server.spawnTornado(transform_matrix)

Spawns a meteor to land at the target transform. Magnitude ranges from 0-1 and scales the main meteor up to 20x default size.

is_success = server.spawnMeteor(transform_matrix, magnitude, is_spawn_tsunami)

Spawns a meteor to land at the target location, preceded by several smaller meteors. Magnitude ranges from 0-1 and scales the main meteor up to 20x default size, this magnitude also increases the number of secondary meteors spawned.

is_success = server.spawnMeteorShower(transform_matrix, magnitude, is_spawn_tsunami)

Activates the closest volcano if the volcano tile is in simulation range.

is_success = server.spawnVolcano(transform_matrix)

Get a list of volcano data.

VOLCANOS = server.getVolcanos()

VOLCANOS = {
		x = volcano world x
		y = volcano world y
		z = volcano world z
		tile_x = tile grid x
		tile_y = tile grid z
	}

Gets the blended oil amount at the target location.

oil_amount = server.getOilSpill(transform_matrix)

Sets the oil spill amount at the target location, this amount is blended across nearby tiles.

server.setOilSpill(transform_matrix, amount)

[Requires Search and Destroy DLC to be enabled] Spawn an explosion at the specified world position matrix.

server.spawnExplosion(transform_matrix, magnitude)

Set a game setting.

server.setGameSetting(GAME_SETTING, value)

Returns a table of the game settings indexed by the GAME_SETTING string, this can be accessed inline eg. server.getGameSettings().third_person

{[GAME_SETTING] = value} = server.getGameSettings()

GAME_SETTING |
	"third_person",
	"third_person_vehicle",
	"vehicle_damage",
	"player_damage",
	"npc_damage",
	"sharks",
	"fast_travel",
	"teleport_vehicle",
	"rogue_mode",
	"auto_refuel",
	"megalodon",
	"map_show_players",
	"map_show_vehicles",
	"show_3d_waypoints",
	"show_name_plates",
	"day_length",
	"night_length",
	"infinite_money",
	"settings_menu",
	"unlock_all_islands",
	"infinite_batteries",
	"infinite_fuel",
	"engine_overheating",
	"no_clip",
	"map_teleport",
	"cleanup_vehicle",
	"clear_fow", -- clear fog of war
	"vehicle_spawning",
	"photo_mode",
	"respawning",
	"settings_menu_lock",
	"despawn_on_leave", -- despawn player characters when they leave a server
	"unlock_all_components",
	"override_weather",

Set game money and research points.

server.setCurrency(money, research_points)

Get game money.

amount = server.getCurrency()

Get game research points.

amount = server.getResearchPoints()

Get number of days since game start.

days_survived = server.getDateValue()

Get the current game date.

d, m, y = server.getDate()

Get the current game time.

CLOCK = server.getTime()
	CLOCK = {
		["hour"] = hour (24),
		["minute"] = minute (60),
		["daylight_factor"] = midday factor (0-1),
		["percent"] = day_cycle_percent (0-1),
	}

Get the current game weather at a location.

WEATHER = server.getWeather(transform_matrix)
	WEATHER = {
		["fog"] = fog factor (0-1),
		["rain"] = rain factor (0-1),
		["snow"] = snow factor (0-1),
		["wind"] = wind factor (0-1),
		["temp"] = temp factor (0-1),
	}

Sets the custom weather override values (0-1).

server.setWeather(fog, rain, wind)

Sets the target audio mood. Mood tracks naturally decrease over time. -1 for all peers.

server.setAudioMood(peer_id, AUDIO_MOOD)
	AUDIO_MOOD |
		0 = none,
		1 = main_menu,
		2 = mood_normal,
		3 = mood_mission_mid,
		4 = mood_mission_high,

Returns the world position of a random ocean tile within the selected search range.

transform_matrix, is_success = server.getOceanTransform(transform_matrix, min_search_range, max_search_range)

Returns the generated ocean floor height offset of a tile. This is not terrain height and does not include mesh height. It is advised to only use this for ocean tiles. Example return value: -375

height = server.getOceanFloor(transform_matrix)

Returns the world position of a random tile of type tile_name closest to the supplied location. Optional search radius defaults to 50000.

transform_matrix, is_success = server.getTileTransform(transform_matrix, tile_name, [search_radius])

Returns the data for the tile at the specified location.

TILE_DATA, is_success = server.getTile(transform)

TILE_DATA = {
		["name"] = tile_name, 
		["sea_floor"] = sea_floor_height, 
		["cost"] = purchase_cost, 
		["purchased"] = is_purchased, 
	}

Returns the data for the tile selected as the start tile in the game settings.

TILE_DATA = server.getStartTile()

TILE_DATA = {
		["name"] = tile_name, 
		["x"] = tile_x, 
		["y"] = tile_y, 
		["z"] = tile_z, 
	}

Returns whether the tile at the given world coordinates is player owned.

is_purchased = server.getTilePurchased(transform_matrix)

Returns the current inventory amounts for the tile resource depot.

coal, uranium, diesel, jet_fuel, solid_propellant = server.getTileInventory(transform_matrix)

Sets the inventory amounts for the tile resource depot.

server.setTileInventory(transform_matrix, coal, uranium, diesel, jet_fuel, solid_propellant)

Returns whether matrix_object is within zone_size of matrix_zone.

is_in_area = server.isInTransformArea(matrix_object, matrix_zone, zone_size_x, zone_size_y, zone_size_z)

Returns a table of waypoints that form a path from start to end, matching the required tags, tags should be separated by commas with no spaces.

{ [i] = {x = world_x, z = world_z} } = server.pathfind(matrix_start, matrix_end, required_tags, avoided_tags)

Returns a table of waypoints tagged with ocean_path, that form a path from start to end. This function is the same as passing 'ocean_path' to the function above.

{ [i] = {x = world_x, z = world_z} } = server.pathfindOcean(matrix_start, matrix_end)

Returns a table of underground oil deposit positions.

{ [i] = {x = world_x, y = world_y, z = world_z, r = radius, oil = current_oil} } = server.getOilDeposits()


</code></pre>
<hr>
<h2 id='general.txt' style='color: #abb2bf; margin-bottom: 5px;'>General</h2>
<pre><code class='lua'>The following commands can be called at any time and are built into the game:

Autosaves the game and live-reloads all active scripts and mission locations to allow for live debugging and editing of missions

?reload_scripts

Kicks the associated player from the game.

?kick <peer_id>

Bans the associated player from the game.

?ban <peer_id>

Give a player admin status. Authorize a player to use commands and bypass custom menu lock.

?add_admin <peer_id>

Remove admin status from a player.

?remove_admin <peer_id>

Give a player auth status. Authorize a player to use workbenches.

?add_auth <peer_id>

Remove auth status from a player.

?remove_auth <peer_id>

Dedicated server only, lets you force the dedicated server to save. save_name parameter is optional and default uses save_name from server config (If config setting is left blank it will save to autosave_server.)

?save <save_name>



Lua scripting overview

Lua scripting gives you the tools to create advanced missions and custom gamemodes. Stormworks provides a number of functions that allow your script to interface with the game.
This guide outlines the functions that are available but is not a comprehensive tutorial on using the Lua language

API General Info

peer_id can be found on the left side of the player list, singleplayer games always use peer_id 0

The coordinate system uses Y as the vertical axis for matrices and vectors in world space

The functionalities of arguments in CAPS are detailed below the corresponding function

peer_id can be passed as -1 to send for all connected peers

Any variables saved to a lua table named g_savedata will be saved out and loaded from a per-save lua_data.xml, you can use this to make your scripts persistent

For code that you want to run once at the start of the save use onCreate(is_world_create) and check is_world_create is true

Using server.announce() in onCreate will usually cause the messages to be sent before your client is connected and they will not be received

Remember to avoid the table length operator # and iPairs unless dealing with contiguous tables that start at index 1 (If a table is unexpectedly showing as length 0 this probably means it is not contiguous, the following function can be used for non - standard tables)

function tableLength(T)
	local count = 0
	for _ in pairs(T) do count = count + 1 end
	return count
end

This scripting API is very powerful and as such there are some important reminders to take note of:

- Your script has a max execution time of 1000 milliseconds, however it is still possible to create scripts that significantly slow down the game. It is your responsibility to ensure your script runs efficiently.

- peer_id can be passed as -1 to send for all connected peers

- Any variables saved to a lua table named g_savedata will be saved out and loaded from a per-save lua_data.xml, you can use this to make your scripts persistent

- A number of safeguards are in place to sandbox your script, however it is still possible to write scripts that will potentially crash your game. If you crash your game with a script, it's likely that you're doing something (very) wrong. This is your own responsibility. If you suspect you have encountered a legitimate bug, please report it on the Stormworks issue tracker (accessible from the pause-menu).

- Malicious and harmful scripts will not be tolerated on the Stormworks Steam Workshop.

Finally, enjoy the almost limitless possibilities that these scripts provide. This short wiki aims to give a good overview of how scripting in Stormworks works, however if you have any questions that are not covered here, please feel free to join us on Discord (accessible from the pause-menu)!


</code></pre>
<hr>
<h2 id='matrix.txt' style='color: #abb2bf; margin-bottom: 5px;'>Matrix</h2>
<pre><code class='lua'>Stormworks provides a limited set of matrix functions that are useful for transforming positions of objects in scripts:

Multiply two matrices together.

out_matrix = matrix.multiply(matrix1, matrix2)

Invert a matrix.

out_matrix = matrix.invert(matrix1)

Transpose a matrix.

out_matrix = matrix.transpose(matrix1)

Return an identity matrix.

out_matrix = matrix.identity()

Return a rotation matrix rotated in the X axis.

out_matrix = matrix.rotationX(radians)

Return a rotation matrix rotated in the Y axis.

out_matrix = matrix.rotationY(radians)

Return a rotation matrix rotated in the Z axis.

out_matrix = matrix.rotationZ(radians)

Return a translation matrix translated by x,y,z.

out_matrix = matrix.translation(x,y,z)

Get the x,y,z position from a matrix.

x,y,z = matrix.position(matrix1)

Find the distance between two matrices.

dist = matrix.distance(matrix1, matrix2)

Multiplies a matrix by a vec 4.

out_x, out_y, out_z, out_w = matrix.multiplyXYZW(matrix1, x, y, z, w)

Returns the rotation required to face an X Z vector

out_rotation = matrix.rotationToFaceXZ(x, z)

Example

Most API functions take a matrix as a parameter so users that do not wish to use matrices directly can convert between matrices and coordinates as follows:

-- Teleport peer_1 10m up
peer_1_pos, is_success = server.getPlayerPos(1)
if is_success then
	local x, y, z = matrix.position(peer_1_pos)
	y = y + 10
	server.setPlayerPos(1, matrix.translation(x,y,z))
end


</code></pre>
<hr>
<h2 id='misc.txt' style='color: #abb2bf; margin-bottom: 5px;'>Misc</h2>
<pre><code class='lua'>The following functions will add editable UI elements to the Addon script selector when starting a new game. These functions will return null unless the game was started through the new game screen, so it is recommended to use them in onCreate while is_world_create is true OR in g_savedata where the nil value will be overwritten with the saved value on subsequent loads of the game.

A simple boolean checkbox.

property.checkbox(text, default_value)

A slider that is limited between two numbers.

property.slider(text, min, max, increment, default_value)

Http

Send a Http request.

server.httpGet(port, request)

Admin

Ban a player.

server.banPlayer(peer_id)

Kick a player.

server.kickPlayer(peer_id)

Give a player Admin.

server.addAdmin(peer_id)

Remove Admin from a player.

server.removeAdmin(peer_id)

Give a player Auth.

server.addAuth(peer_id)

Remove Auth from a player.

server.removeAuth(peer_id)

Send a save command for dedicated server, with optional save name parameter.

server.save((save_name))

Misc

Get system time in ms (Can be used for random seeding).

system_time = server.getTimeMillisec()

Developer

Get whether the game considers the tutorial active (Default missions check this before they spawn).

tutorial_completed = server.getTutorial()

Sets whether the game considers the tutorial active (useful if you are making your own tutorial).

server.setTutorial()

Gets whether the player has acknowledged the video tutorials (useful if you are making your own tutorial) Returns true on a dedicated server.

video_tutorial_completed = server.getVideoTutorial()

Returns true if the host player is a developer of the game.

is_dev = server.isDev()

Returns true if the server has the Search and Destroy DLC active.

is_enabled = server.dlcWeapons()

Returns true if the server has the Industrial Frontier DLC active.

is_enabled = server.dlcArid()

Returns true if the server has the Space DLC active.

is_enabled = server.dlcSpace()

Returns the ID of the currently active seasonal event.

EVENT_ID = server.getSeasonalEvent()

EVENT_ID = {
		0 = NONE,
		1 = Halloween,
		2 = Christmas,
	}


</code></pre>
<hr>
<h2 id='objects.txt' style='color: #abb2bf; margin-bottom: 5px;'>Objects</h2>
<pre><code class='lua'>Returns a table containing info on all connected players.

PLAYER_LIST = server.getPlayers()

PLAYER_LIST |
	{ [peer_index] = { ["id"] = peer_id, ["name"] = name, ["admin"] = is_admin, ["auth"] = is_auth, ["steam_id"] = steam_id }}

Returns the player name of the specified peer as it appears to the server.

name, is_success = server.getPlayerName(peer_id)

Gets the world position of a specified peer as a matrix.

transform_matrix, is_success = server.getPlayerPos(peer_id)

Teleports the specified player to the target world position.

is_success = server.setPlayerPos(peer_id, transform_matrix)

Returns the forward vector of the specified player's camera

x, y, z, is_success = server.getPlayerLookDirection(peer_id)

Objects

All dynamic objects in Stormworks have an object ID, Player characters have ownership of a dynamic object that can be manipulated with the following functions just like any NPC or physics object. Please note that peer_id and object_id are separate systems; the following function can convert from peer id to object id to allow manipulation of player characters.

Get a specified player's character object id.

object_id, is_success = server.getPlayerCharacterID(peer_id)

Spawn the specified object at the specified world position.

object_id, is_success = server.spawnObject(transform_matrix, OBJECT_TYPE)

OBJECT_TYPE |
	0 = none,
	1 = character,
	2 = crate_small,
	3 = collectable, (Not spawnable)
	4 = basketball,
	5 = television,
	6 = barrel,
	7 = schematic,  (Not spawnable)
	8 = debris,  (Not spawnable)
	9 = chair,
	10 = trolley_food,
	11 = trolley_med,
	12 = clothing,  (Not spawnable)
	13 = office_chair,
	14 = book,
	15 = bottle,
	16 = fryingpan,
	17 = mug,
	18 = saucepan,
	19 = stool,
	20 = telescope,
	21 = log,
	22 = bin,
	23 = book_2,
	24 = loot,
	25 = blue_barrel,
	26 = buoyancy_ring,
	27 = container,
	28 = gas_canister,
	29 = pallet,
	30 = storage_bin,
	31 = fire_extinguisher,
	32 = trolley_tool,
	33 = cafetiere,
	34 = drawers_tools,
	35 = glass,
	36 = microwave,
	37 = plate,
	38 = box_closed,
	39 = box_open,
	40 = desk_lamp,
	41 = eraser_board,
	42 = folder,
	43 = funnel,
	44 = lamp,
	45 = microscope,
	46 = notebook,
	47 = pen_marker,
	48 = pencil,
	49 = scales,
	50 = science_beaker,
	51 = science_cylinder,
	52 = science_flask,
	53 = tub_1,
	54 = tub_2,
	55 = filestack,
	56 = barrel_toxic,
	57 = flare,
	58 = fire,
	59 = animal,
	60 = map_label,  (Not spawnable)
	61 = iceberg,  (Not spawnable)
	62 = gun_flare,
	63 = vehicle_flare,
	64 = ammo_shell,
	65 = binoculars,
	66 = C4,
	67 = grenade,
	68 = vehicle_flare,
	69 = coal/resource,
	70 = meteorite,
	71 = glowstick,
	72 = creature,
	73 = drill_rod,
	74 = fishing_lure,

Spawn a world fire at the specified world position matrix. parent_vehicle_id should be 0 if the fire should not move relative to a vehicle. Fires will slowly grow until they reach 1 magnitude.

object_id, is_success = server.spawnFire(transform_matrix, fire_size, fire_magnitude, is_lit, is_explosive, parent_vehicle_id, explosion_magnitude)

Spawn a character object with an optional outfit at the specified world postion.

object_id, is_success = server.spawnCharacter(transform_matrix, (OUTFIT_TYPE))

OUTFIT_TYPE |
	0 = none,
	1 = worker,
	2 = fishing,
	3 = waiter,
	4 = swimsuit,
	5 = military,
	6 = office,
	7 = police,
	8 = science,
	9 = medical,
	10 = wetsuit,
	11 = civilian

Spawn a scenery animal at the specified world postion.

object_id, is_success = server.spawnAnimal(transform_matrix, ANIMAL_TYPE, size_multiplier)

ANIMAL_TYPE |
	0 = shark,
	1 = whale,
	4 = kraken

[Requires Industrial Frontier DLC to be enabled] Spawn an animal/creature at the specified world postion.

object_id, is_success = server.spawnCreature(transform_matrix, CREATURE_TYPE, size_multiplier)

CREATURE_TYPE |
	0 = badger_common,
	1 = bear_grizzly,
	2 = bear_black,
	3 = bear_polar,
	4 = chicken_barnevelder,
	5 = chicken_marans,
	6 = chicken_orpington_fowl,
	7 = chicken_sussex_fowl,
	8 = cow_angus,
	9 = cow_hereford,
	10 = cow_highland,
	11 = cow_holstein,
	12 = sasquatch,
	13 = yeti 
	14 = deer_red_f,
	15 = deer_red_m,
	16 = deer_sika_f,
	17 = deer_sika_m,
	18 = dog_beagle,
	19 = dog_border_collie,
	20 = dog_boxer,
	21 = dog_corgi,
	22 = dog_dachschund,
	23 = dog_dalmatian,
	24 = dog_dobermann,
	25 = dog_german_shepherd,
	26 = dog_greyhound,
	27 = dog_jack_russell,
	28 = dog_labrador,
	29 = dog_newfoundland,
	30 = dog_pug,
	31 = dog_shiba,
	32 = dog_siberian_husky,
	33 = dog_st_bernard,
	34 = dog_vizsla,
	35 = dog_yorkshire_terrier,
	36 = fox_red,
	37 = fox_arctic,
	38 = goat_alpine,
	39 = goat_bengal,
	40 = goat_oberhasli,
	41 = goat_saanen,
	42 = hare_arctic,
	43 = hare_irish,
	44 = hare_mountain,
	45 = horse_clydesdale,
	46 = horse_friesian,
	47 = horse_haflinger,
	48 = horse_welara,
	49 = muntjac_f,
	50 = muntjac_m,
	51 = penguin_gentoo,
	52 = pig_angeln_saddleback,
	53 = pig_old_spot,
	54 = pig_tamworth,
	55 = pig_yorkshire,
	56 = seal_polar,
	57 = sheep_black_nose,
	58 = sheep_highlander,
	59 = sheep_mule,
	60 = wildcat_scottish,
	61 = wolf_arctic,
	62 = wolf_costal,
	63 = wolf_plains,

	64 = zombie_male,
	65 = zombie_male_a,
	66 = zombie_male_b,
	67 = zombie_male_c,
	68 = zombie_male_d,
	69 = zombie_male_e,
	70 = zombie_male_f,
	71 = zombie_male_g,
	72 = zombie_male_nurse,
	73 = zombie_male_arctic,
	74 = zombie_male_firefighter,
	75 = zombie_male_pilot,
	76 = zombie_male_police,
	77 = zombie_male_ranger,
	78 = zombie_male_scuba,
	79 = zombie_male_tree_surgeon,
	80 = zombie_female,
	81 = zombie_female_a,
	82 = zombie_female_b,
	83 = zombie_female_c,
	84 = zombie_female_d,
	85 = zombie_female_e,
	86 = zombie_female_f,
	87 = zombie_female_arctic,
	88 = zombie_female_firefighter,
	89 = zombie_female_hazmat,
	90 = zombie_female_pilot,
	91 = zombie_female_pirate,
	92 = zombie_female_police,
	93 = zombie_female_safari,
	94 = zombie_female_sar,
	95 = zombie_female_scuba,
	96 = zombie_female_surgeon,
	97 = buffalo,
	98 = sheep_bighorn,
	99 = roadrunner,
    100 = lion_mountain,
    101 = crocodile,
    102 = coyote,
    103 = gila_monster,
    104 = tortoise_desert,

[Requires Industrial Frontier DLC to be enabled] Set the next target position for a creature to path towards.

is_success = server.setCreatureMoveTarget(object_id, transform_matrix)

Spawns an equipment item dynamic object or fish. Fish do not retain an object_id as they are spawned as part of the wildlife system.

object_id, is_success = server.spawnEquipment(transform_matrix, EQUIPMENT_ID, int, float)

EQUIPMENT_ID |
Outfits
	0 = none,
	1 = diving,
	2 = firefighter,
	3 = scuba,
	4 = parachute, [int = {0 = deployed, 1 = ready}]
	5 = arctic,
	29 = hazmat,
	74 = bomb_disposal,
	75 = chest_rig,
	76 = black_hawk_vest
	77 = plate_vest,
	78 = armor_vest,
	79 = space_suit,
	80 = space_suit_exploration,
Items
	6 = binoculars,
	7 = cable,
	8 = compass,
	9 = defibrillator, [int = charges]
	10 = fire_extinguisher, [float = ammo]
	11 = first_aid, [int = charges]
	12 = flare, [int = charges]
	13 = flaregun, [int = ammo]
	14 = flaregun_ammo, [int = ammo]
	15 = flashlight, [float = battery]
	16 = hose, [int = {0 = hose off, 1 = hose on}]
	17 = night_vision_binoculars, [float = battery]
	18 = oxygen_mask, [float = oxygen]
	19 = radio, [int = channel] [float = battery]
	20 = radio_signal_locator, [float = battery]
	21 = remote_control, [int = channel] [float = battery]
	22 = rope, [int = {0 = default length, 1 = 1m, 2 = 2m, 3 = 4m, 4 = 8m, 5 = 16m}]
	23 = strobe_light, [int = {0 = off, 1 = on}] [float = battery]
	24 = strobe_light_infrared, [int = {0 = off, 1 = on}] [float = battery]
	25 = transponder, [int = {0 = off, 1 = on}] [float = battery]
	26 = underwater_welding_torch, [float = charge]
	27 = welding_torch, [float = charge]
	28 = coal/ore/ingot,
	30 = radiation_detector, [float = battery]
	31 = c4, [int = ammo]
	32 = c4_detonator,
	33 = speargun, [int = ammo]
	34 = speargun_ammo,
	35 = pistol, [int = ammo]
	36 = pistol_ammo,
	37 = smg, [int = ammo]
	38 = smg_ammo,
	39 = rifle, [int = ammo]
	40 = rifle_ammo,
	41 = grenade, [int = ammo]
	42 = machine_gun_ammo_box_k,
	43 = machine_gun_ammo_box_he,
	44 = machine_gun_ammo_box_he_frag,
	45 = machine_gun_ammo_box_ap,
	46 = machine_gun_ammo_box_i,
	47 = light_auto_ammo_box_k,
	48 = light_auto_ammo_box_he,
	49 = light_auto_ammo_box_he_frag,
	50 = light_auto_ammo_box_ap,
	51 = light_auto_ammo_box_i,
	52 = rotary_auto_ammo_box_k,
	53 = rotary_auto_ammo_box_he,
	54 = rotary_auto_ammo_box_he_frag,
	55 = rotary_auto_ammo_box_ap,
	56 = rotary_auto_ammo_box_i,
	57 = heavy_auto_ammo_box_k,
	58 = heavy_auto_ammo_box_he,
	59 = heavy_auto_ammo_box_he_frag,
	60 = heavy_auto_ammo_box_ap,
	61 = heavy_auto_ammo_box_i,
	62 = battle_shell_k,
	63 = battle_shell_he,
	64 = battle_shell_he_frag,
	65 = battle_shell_ap,
	66 = battle_shell_i,
	67 = artillery_shell_k,
	68 = artillery_shell_he,
	69 = artillery_shell_he_frag,
	70 = artillery_shell_ap,
	71 = artillery_shell_i,
	72 = glowstick,
	73 = dog_whistle,
	81 = fishing_rod
Fish
	82 = anchovie, [int = fish_state {0 = idle, 1 = flee, 2 = flop, 3 = dead}]
	83 = anglerfish,
	84 = arctic_char,
	85 = ballan_lizardfish,
	86 = ballan_wrasse,
	87 = barreleye_fish,
	88 = black_bream,
	89 = black_dragonfish,
	90 = clown_fish,
	91 = cod,
	92 = dolphinfish,
	93 = gulper_eel,
	94 = haddock,
	95 = hake,
	96 = herring,
	97 = john_dory,
	98 = labrus,
	99 = lanternfish,
	100 = mackerel,
	101 = midshipman,
	102 = perch,
	103 = pike,
	104 = pinecone_fish,
	105 = pollack,
	106 = red_mullet,
	107 = rockfish,
	108 = sablefish,
	109 = salmon,
	110 = sardine,
	111 = scad,
	112 = sea_bream,
	113 = sea_halibut,
	114 = sea_piranha,
	115 = seabass,
	116 = slimehead,
	117 = snapper,
	118 = snapper_gold,
	119 = snook,
	120 = spadefish,
	121 = trout,
	122 = tubeshoulders_fish,
	123 = viperfish,
	124 = yellowfin_tuna,

Despawn the specified object when it is out of a player's range. is_instant will instantly despawn the object.

is_success = server.despawnObject(object_id, is_instant)

Get the world position of a specified object. is_success returns false if the object cannot be found.

transform_matrix, is_success = server.getObjectPos(object_id)

Get the simulating state of a specified object. is_success returns false if the object cannot be found.

is_simulating, is_success = server.getObjectSimulating(object_id)

Set the world position of a specified object. is_success returns false if the object cannot be found.

is_success = server.setObjectPos(object_id, transform_matrix)

Set data for an existing world fire using its object_id.

server.setFireData(object_id, is_lit, is_explosive)

Get data for a world fire using its object_id.

is_lit, is_success = server.getFireData(object_id)

Kills the target character.

server.killCharacter(object_id)

Revives the target character.

server.reviveCharacter(object_id)

Sets the target character (or sit-able creature) to be seated in the first seat with the specified name found on the specified vehicle. Aliases: setCharacterSeated, setCreatureSeated

server.setSeated(object_id, vehicle_id, seat_name)

Sets the target character (or sit-able creature) to be seated in the seat with the specified voxel position found on the specified vehicle. Aliases: setCharacterSeated, setCreatureSeated

server.setSeated(object_id, vehicle_id, x, y, z)

Get character data for a specified character object. Returns a table if successful and nil upon failure. (Aliased to getCharacterData())

OBJECT_DATA = server.getObjectData(object_id)

OBJECT_DATA = { 
		["object_type"] = OBJECT_TYPE
		["hp"] = hp, 
		["incapacitated"] = is_incapacitated, 
		["dead"] = is_dead, 
		["interactable"] = is_interactable,
		["ai"] = is_ai,
		["name"] = name,
		["creature_type"] = CREATURE_TYPE,
		["scale"] = scale,
	}

Get the current vehicle_id for a specified character object.

vehicle_id, is_success = server.getCharacterVehicle(object_id)

Set character data for a specified character object. Non-interactable characters are frozen in place and cannot be moved. is_interactable has no effect on Player characters.

server.setCharacterData(object_id, hp, is_interactable, is_ai)

Sets the display name for a non-player character or creature.

server.setCharacterTooltip(object_id, display_name)

server.setCreatureTooltip(object_id, display_name)

Set the item slot data for a specified character object. Certain equipments hold data that can be initialized as detailed below.

is_success = server.setCharacterItem(object_id, SLOT_NUMBER, EQUIPMENT_ID, is_active, [integer_value], [float_value])

SLOT_NUMBER |
    1 = Large Equipment Slot, 
    2, 3, 4, 5, 6, 7, 8, 9 = Small Equipment Slot, 
    10 = Outfit Slot

Get the item in the specified slot for a specified character object.

EQUIPMENT_ID, is_success = server.getCharacterItem(object_id, SLOT_NUMBER)


</code></pre>
<hr>
<h2 id='vehicles.txt' style='color: #abb2bf; margin-bottom: 5px;'>Vehicles</h2>
<pre><code class='lua'>Spawns a vehicle component from a specific addon. See getLocationComponentData() for info on how to get component_id. group_vehicles is a table listing all vehicle ids in this group.

vehicle_id, is_success, group_vehicles = server.spawnAddonVehicle(transform_matrix, addon_index, component_id)

Spawns a vehicle from local appdata using its file name. group_vehicles is a table listing all vehicle ids in this group.

vehicle_id, is_success, group_vehicles = server.spawnVehicle(transform_matrix, save_name)

Sets a vehicle to despawn when out of a player's range. If is_instant the vehicle will instantly despawn no matter the player's proximity.

is_success = server.despawnVehicle(vehicle_id, is_instant)

Sets a all vehicles in a vehicle group to despawn when out of a player's range. If is_instant the vehicles will instantly despawn no matter the player's proximity.

is_success = server.despawnVehicleGroup(group_id, is_instant)

Gets the world position of the center of a vehicle's main body. Optionally passing a voxel position will return the world position of the specified voxel on the vehicle.

transform_matrix, is_success = server.getVehiclePos(vehicle_id, [voxel_x, voxel_y, voxel_z])

Converts a world transform to an astronomy transform. Used for navigating in Space.

astronomy_transform_matrix = server.getAstroPos(transform_matrix)

Teleports the specified vehicle to the target world position. The vehicle is unloaded and reloaded.

is_success = server.setVehiclePos(vehicle_id, transform_matrix)

Teleports the specified vehicle to the target world position. The vehicle is unloaded and reloaded. The vehicle is displaced by other vehicles at the arrival point.

is_success, result_matrix = server.setVehiclePosSafe(vehicle_id, transform_matrix)

Teleports all vehicles in the group to the target world position. The vehicle is unloaded and reloaded.

is_success = server.setGroupPos(group_id, transform_matrix)

Teleports all vehicles in the group to the target world position. The vehicle is unloaded and reloaded. The vehicle is displaced by other vehicles that are not in the group at the arrival point.

is_success, result_matrix = server.setGroupPosSafe(group_id, transform_matrix)

Moves the specified vehicle to the target world position.

is_success = server.moveVehicle(vehicle_id, transform_matrix)

Moves the specified vehicle to the target world position. The vehicle is displaced by other vehicles at the arrival point.

is_success, result_matrix = server.moveVehicleSafe(vehicle_id, transform_matrix)

Moves all vehicles in the group to the target world position.

is_success = server.moveGroup(vehicle_id, transform_matrix)

Moves all vehicles in the group to the target world position. The vehicle is displaced by other vehicles that are not in the group at the arrival point.

is_success, result_matrix = server.moveGroupSafe(vehicle_id, transform_matrix)

Checks if a zone of size xyz is clear of vehicles at the provided transform.

is_success = server.isLocationClear(transform_matrix, x, y, z)

Reloads the vehicle as if spawning from a workbench, refreshing damage and inventories etc.

is_success = server.resetVehicleState(vehicle_id)

Cleans up all player spawned vehicles.

server.cleanVehicles()

Cleans up all fallout zones.

server.clearRadiation()

Returns a table of vehicle ids in the vehicle group.

{[i] = vehicle_id}, is_success = server.getVehicleGroup(group_id)

Gets general data for a vehicle.

VEHICLE_DATA, is_success = server.getVehicleData(vehicle_id)
	VEHICLE_DATA = {
		["tags_full"] = tags, 
		["tags"] = { [i] = tag },
		["group_id"] = vehicle_group_id,
		["transform"] = transform_matrix, 
		["simulating"] = is_simulating, 
		["editable"] = is_editable, 
		["invulnerable"] = is_invulnerable, 
		["static"] = is_static

Gets advanced data for a LOADED vehicle. Including a list of attached character objects.

LOADED_VEHICLE_DATA, is_success = server.getVehicleComponents(vehicle_id)
	LOADED_VEHICLE_DATA = {
		["voxels"] = voxel count,
		["mass"] = mass, 
		["characters"] = { [i] = char_id },
		["components"] = { 
			["signs"] = { [i] = { SIGN_DATA } 
			["seats"] = { [i] = { SEAT_DATA }, 
			["buttons"] = { [i] = { BUTTON_DATA }, 
			["dials"] = { [i] = { DIAL_DATA } 
			["tanks"] = { [i] = { TANK_DATA } 
			["batteries"] = { [i] = { BATTERY_DATA } 
			["hoppers"] = { [i] = { HOPPER_DATA } 
			["guns"] = { [i] = { GUN_DATA } 
			["rope_hooks"] = { [i] = { ROPE_HOOK_DATA } 
		}

Each component contains the following data by default in addition to the type specific data detailed below in their specific get functions

VEHICLE_COMPONENT_DATA = { 
			["name"], 
			["pos"] = { 
				["x"] = voxel_x, 
				["y"] = voxel_y, 
				["z"] = voxel_z 
			} 
		}
	}

Returns the value of the first tank of the specified name or voxel position found on the specified vehicle. Stormworks uses Centi-Litres behind the scenes and as such values here will reflect that (10x Litres).

DATA, is_success = server.getVehicleTank(vehicle_id, tank_name)

DATA, is_success = server.getVehicleTank(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		},
		["value"] = current_held_total, 
		["values"] = { FLUID_TYPE = amount}, 
		["capacity"] = total_capacity, 
		["fluid_type"] = FLUID_TYPE (set in tank properties), 
	}

	FLUID_TYPE |
	0 = fresh water,
	1 = diesel,
	2 = jet fuel,
	3 = air,
	4 = exhaust,
	5 = oil,
	6 = sea water,
	7 = steam,
	8 = slurry,
	9 = saturated slurry,
	10 = oxygen,
	11 = nitrogen,
	12 = hydrogen,

Returns the data of the first seat of the specified name or voxel position found on the specified vehicle.

DATA, is_success = server.getVehicleSeat(vehicle_id, seat_name)

DATA, is_success = server.getVehicleSeat(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		},
		["seated_id"] = seated_object_id (character or creature),
		["seated_peer_id"] = seated_peer_id (if character is a player), 
	}

Returns the state of the first button of the specified name or voxel position found on the specified vehicle.

DATA, is_success = server.getVehicleButton(vehicle_id, button_name)

DATA, is_success = server.getVehicleButton(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		} 
		["on"] = is_on, 
	}

Returns the voxel position of the first sign of the specified name or voxel position found on the specified vehicle.

DATA, is_success = server.getVehicleSign(vehicle_id, sign_name)

DATA, is_success = server.getVehicleSign(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		} 
	}

Returns the value of the first dial of the specified name or voxel position found on the specified vehicle.

DATA, is_success = server.getVehicleDial(vehicle_id, dial_name)

DATA, is_success = server.getVehicleDial(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		},
		["value"] = value_primary, 
		["value2"] = value_secondary, 
	}

Returns the resource count of the first hopper of the specified name or voxel position found on the specified vehicle.

DATA, is_success = server.getVehicleHopper(vehicle_id, hopper_name)

DATA, is_success = server.getVehicleHopper(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		},
		["values"] = { RESOURCE_TYPE = amount}, 
		["capacity"] = total_capacity, 
	}

RESOURCE_TYPE |
	0 = coal,
	1 = iron,
	2 = aluminium,
	3 = gold,
	4 = gold_dirt,
	5 = uranium,
	6 = ingot_iron,
	7 = ingot_steel,
	8 = ingot_aluminium,
	9 = ingot_gold_impure,
	10 = ingot_gold,
	11 = ingot_uranium,
	12 = solid_propellant,
	13 = Anchovy,
	14 = Anglerfish,
	15 = Arctic Char,
	16 = Ballan Lizardfish,
	17 = Ballan Wrasse,
	18 = Barreleye Fish,
	19 = Black Bream,
	20 = Black Dragonfish,
	21 = Clownfish,
	22 = Cod,
	23 = Dolphinfish,
	24 = Gulper Eel,
	25 = Haddock,
	26 = Hake,
	27 = Herring,
	28 = John Dory,
	29 = Labrus,
	30 = Lanternfish,
	31 = Mackerel,
	32 = Midshipman,
	33 = Perch,
	34 = Pike,
	35 = Pinecone Fish,
	36 = Pollock,
	37 = Red Mullet,
	38 = Rockfish,
	39 = Sablefish,
	40 = Salmon,
	41 = Sardine,
	42 = Scad,
	43 = Sea Bream,
	44 = Halibut,
	45 = Sea Piranha,
	46 = Seabass,
	47 = Slimehead,
	48 = Snapper,
	49 = Gold Snapper,
	50 = Snook,
	51 = Spadefish,
	52 = Trout,
	53 = Tubeshoulders fish,
	54 = Viperfish,
	55 = Yellowfin Tuna,

Returns the data of the first battery of the specified name or voxel position found on the specified vehicle.

DATA, is_success = server.getVehicleBattery(vehicle_id, battery_name)

DATA, is_success = server.getVehicleBattery(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		},
		["charge"] = current_charge, 
	}

Returns the data of the first weapon component of the specified name or voxel position found on the specified vehicle.

DATA, is_success = server.getVehicleWeapon(vehicle_id, name)

DATA, is_success = server.getVehicleWeapon(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		},
		["ammo"] = current_ammo, 
		["capacity"] = total_ammo_capacity, 
	}

Returns the data of the first rope anchor component of the specified name or voxel position found on the specified vehicle.

DATA, is_success = server.getVehicleRopeHook(vehicle_id, name)

DATA, is_success = server.getVehicleRopeHook(vehicle_id, voxel_x, voxel_y, voxel_z)

DATA = {
		["name"], 
		["pos"] = { 
			["x"] = voxel_x, 
			["y"] = voxel_y, 
			["z"] = voxel_z 
		}
	}

Applies a set fluid action to the first tank of the specified name or voxel position found on the specified vehicle. Fluid of the same state(gas or liquid) as the target type will be cleared when this function is triggered, therefore to fully clear a tank call this function twice, one for gases and one for liquids. Stormworks uses Centi-Litres behind the scenes and as such values here should reflect that (10x Litres).

server.setVehicleTank(vehicle_id, tank_name, amount, FLUID_TYPE)
server.setVehicleTank(vehicle_id, voxel_x, voxel_y, voxel_z, amount, FLUID_TYPE)
	FLUID_TYPE |
	0 = fresh water,
	1 = diesel,
	2 = jet fuel,
	3 = air,
	4 = exhaust,
	5 = oil,
	6 = sea water,
	7 = steam,
	8 = slurry,
	9 = saturated slurry,

Override the inputs to the first seat of the specified name or voxel position found on the specified vehicle. A seated player will prevent overrides.

server.setVehicleSeat(vehicle_id, seat_name, axis_w, axis_d, axis_up, axis_right, button1, button2, button3, button4, button5, button6, trigger)

server.setVehicleSeat(vehicle_id, voxel_x, voxel_y, voxel_z, axis_w, axis_d, axis_up, axis_right, button1, button2, button3, button4, button5, button6, trigger)

Applies a press action to the first button of the specified name or voxel position found on the specified vehicle.

server.pressVehicleButton(vehicle_id, button_name)

server.pressVehicleButton(vehicle_id, voxel_x, voxel_y, voxel_z)

Applies a set number action to the first keypad of the specified name or voxel position found on the specified vehicle.

server.setVehicleKeypad(vehicle_id, keypad_name, value, (value2))

server.setVehicleKeypad(vehicle_id, voxel_x, voxel_y, voxel_z, value, (value2))

Sets the number of a specific type of mineral objects inside a hopper of the specified name or voxel position found on the specified vehicle.

server.setVehicleHopper(vehicle_id, hopper_name, amount, ORE_TYPE))

server.setVehicleHopper(vehicle_id, voxel_x, voxel_y, voxel_z, amount, ORE_TYPE)

Applies a set charge action to the first battery of the specified name or voxel position found on the specified vehicle. 0 to 1 range.

server.setVehicleBattery(vehicle_id, battery_name, amount)

server.setVehicleBattery(vehicle_id, voxel_x, voxel_y, voxel_z, amount)

Applies a set ammo action to the first weapon component of the specified name or voxel position found on the specified vehicle. 0 to 1 range.

server.setVehicleWeapon(vehicle_id, name, amount)

server.setVehicleWeapon(vehicle_id, voxel_x, voxel_y, voxel_z, amount)

Spawns a rope between two rope anchors on the specified vehicles at the provided rope hook component voxel positions. Length will be clamped to at least the distance between voxels. Length of 0 will spawn the rope at the clamped minimum. Currently does not fully support pulleys second rope slot.

server.spawnVehicleRope(vehicle_id_1, voxel_x_1, voxel_y_1, voxel_z_1, vehicle_id_2, voxel_x_2, voxel_y_2, voxel_z_2, length, ROPE_TYPE)
	ROPE_TYPE |
	0 = rope,
	1 = hose,
	2 = electric cable,
	3 = N/A
	4 = suspension cable,
	5 = N/A,
	6 = Fishing line,

Get the number of burning surfaces on a specified vehicle.

surface_count, is_success = server.getVehicleFireCount(vehicle_id)

Set the default block tooltip of a vehicle to display some text. Blocks with unique tooltips (e.g. buttons) will override this tooltip.

is_success = server.setVehicleTooltip(vehicle_id, text)

Applies impact damage to a vehicle at the specified voxel location. Damage maxiumum is 100. Radius is in meters. Negative damage values will instead repair the area.

is_success = server.addDamage(vehicle_id, damage, voxel_x, voxel_y, voxel_z, radius)

Returns whether the specified vehicle has finished loading and is simulating.

is_simulating, is_success = server.getVehicleSimulating(vehicle_id)

Returns whether the specified vehicle is loading, simulating or unloading.

is_local, is_success = server.getVehicleLocal(vehicle_id)

Sets a vehicle's global transponder to active. (All vehicles have a global transponder that can be active even if a vehicle is not loaded).

is_success = server.setVehicleTransponder(vehicle_id, is_active)

Sets a vehicle to be editable by players. If a vehicle is spawned by a script it will not have a parent workbench until edited by one (Edit vehicle in zone).

is_success = server.setVehicleEditable(vehicle_id, is_editable)

Sets a vehicle to be invulnerable to damage.

is_success = server.setVehicleInvulnerable(vehicle_id, is_invulnerable)

Sets a vehicle to show on the map.

is_success = server.setVehicleShowOnMap(vehicle_id, is_show_on_map)


</code></pre>
<hr>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('a').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });
});
</script>
</body>
</html>